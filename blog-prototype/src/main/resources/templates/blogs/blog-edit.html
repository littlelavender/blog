<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="~{fragments/head-meta :: head-meta}">
<meta charset="UTF-8">
<title>Thymeleaf in action</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.bootcss.com/chosen/1.8.8.rc6/chosen.css">
<link rel="stylesheet" href="https://cdn.bootcss.com/jquery-tagsinput/1.3.6/jquery.tagsinput.min.css">
<link rel="stylesheet" href="../../static/font-awesome-4.7.0/css/font-awesome.min.css" th:href="@{~/font-awesome-4.7.0/css/font-awesome.min.css}">
<link rel="stylesheet" href="https://cdn.bootcss.com/toastr.js/latest/css/toastr.min.css">
<link rel="stylesheet" href="../../static/css/sticky-footer-navbar.css" th:href="@{~/css/blog.css}">
</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>

<!-- 编辑博客页面 -->
<main class="container blog-content-container">
  <div class="row">
    <div class="col-md-9">
      <!-- blog post -->
      <div class="card mb-4">
        <div class="card-body" th:object="${blogModel.blog}">
          <input type="hidden" name="id" th:value="*{id}" id="blogId" />
          <input  type="text" id="title" class="form-control" placeholder="请填写博客标题" maxlength="50" th:value="*{title}" />
          <textarea class="blog-textarea" id="summary" placeholder="请填写博客摘要" maxlength="300" th:text="*{summary}"></textarea>
          <hr>
          <!--  -->
          <textarea id="md" data-provide="markdown" data-hidden-buttons="cmdImage" th:text="*{content}"></textarea>
          <style type="text/css" th:inline="css">
              @import /*[('"' + @{~/thinker-md-dist/stylesheets/thinker-md.vendor.css} + '"')]*/  "../../static/thinker-md-dist/stylesheets/thinker-md.vendor.css";
              @import /*[('"' + @{~/thinker-md-dist/emoji/nature.css} + '"')]*/  "../../static/thinker-md-dist/emoji/nature.css";
              @import /*[('"' + @{~/thinker-md-dist/emoji/object.css} + '"')]*/  "../../static/thinker-md-dist/emoji/object.css";
              @import /*[('"' + @{~/thinker-md-dist/emoji/people.css} + '"')]*/  "../../static/thinker-md-dist/emoji/people.css";
              @import /*[('"' + @{~/thinker-md-dist/emoji/place.css} + '"')]*/  "../../static/thinker-md-dist/emoji/place.css";
              @import /*[('"' + @{~/thinker-md-dist/emoji/Sysmbols.css} + '"')]*/  "../../static/thinker-md-dist/emoji/Sysmbols.css";
              @import /*[('"' + @{~/thinker-md-dist/emoji/twemoji.css} + '"')]*/  "../../static/thinker-md-dist/emoji/twemoji.css";
          </style>
          <hr>
        </div>
      </div><!-- blog post end -->
    </div>
    
    <!-- 右侧栏目 -->
    <div class="col-md-3">
      <div>
        <!-- 文章目录 -->
        <div class="card">
          <div class="card-header">
            <i class="fa fa-file-image-o" aria-hidden="true"></i> <span>图片上传</span>
          </div>
          <div class="card-body">
            <div class="row mt-1">
              <div  class="col-lg-12">
                <form  enctype="multipart/form-data"  id="uploadformid"  >
                  <input type="file" name="file" accept="image/png,image/gif,image/jpeg" id="file">
                  <button class="btn btn-primary float-right"  type="button" id="uploadImage" >插入</button>
                </form>
              </div>
            </div>
          </div>
        </div>
        <!-- 博客设置 -->
        <div class="card mt-4">
          <div class="card-header">
            <i class="fa fa-cog" aria-hidden="true"></i> <span>博客设置</span>
          </div>
          <div class="card-body">
            <div class="row mt-1">
              <div  class="col-lg-12">
                <label for="" class="">标签：</label>
                <input type="text" class="form-control form-control-sm form-control-tag" th:value="${blogModel.blog.tags}">
              </div>
            </div>
            <div class="row mt-1">
              <div  class="col-lg-12">
                <label for="" class="">分类：</label>
                <select class="form-control form-control-sm form-control-chosen" id="catalogSelect" data-placeholder="请选择" >
                  <option th:value="*{id}" th:text="*{name}" th:each="catalog : ${blogModel.catalogs}" th:object="${catalog}" th:selected="${catalog  eq blogModel.blog.catalog }">Java</option>
                  <!-- /*
                  <option>分布式</option>
                  <option>数据库</option>
                  */ -->
                </select>
              </div>
            </div>
            <div class="row mt-1">
              <div  class="col-lg-12">
                <button class="btn btn-primary float-right" id="submitBlog">发布</button>
              </div>
            </div>
          </div>
        </div><!-- .card end -->
      </div>
    </div><!-- 右侧栏目 end -->
    
  </div><!-- .row -->
</main><!-- .container -->

<div th:replace="~{fragments/footer :: footer}"></div>

<!-- Javascript -->
<!-- bootstrap -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<!-- toastr 通知插件 -->
<script src="https://cdn.bootcss.com/toastr.js/latest/js/toastr.min.js"></script>
<!-- jquery-tagsinput 标签插件 -->
<script src="https://cdn.bootcss.com/jquery-tagsinput/1.3.6/jquery.tagsinput.min.js"></script>
<!-- chosen 下拉框插件-->
<script src="https://cdn.bootcss.com/chosen/1.8.8.rc6/chosen.jquery.min.js"></script>
<!-- thinker-md -->
<script src="../../static/thinker-md-dist/javascripts/thinker-md.vendor.min.js" th:src="@{~/thinker-md-dist/javascripts/thinker-md.vendor.min.js}"></script>
<script>
	// 初始化marddown
    $("#md").markdown({
        language: 'zh',
        fullscreen: {
            enable: true
        },
        resize: 'vertical',
        localStorage: 'md',
        imgurl: 'http://localhost:8080/c/imgUpload',
        base64url: 'http://localhost:8080/c/imgUpload'
    });
	
	// 初始化标签
    $('.form-control-tag').tagsInput({
    	'height':'auto',
    	'width':'auto', 
    	'defaultText':''
    });
	
	// 初始化chosen
	$('.form-control-chosen').chosen();
	
</script>
<!-- 事件函数 -->
<script src="../../static/js/blogs/blog-edit.js" th:src="@{~/js/blogs/blog-edit.js}"></script>

</body>
</html>